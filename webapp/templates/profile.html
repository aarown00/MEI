{% extends "base.html" %}
{% load static %}

{% block title %}Profile | IT Request System{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/viewreview_admin.css' %}">
{% endblock %}

{% block content %}

<div class="mx-auto max-w-7xl px-4 py-6 sm:py-10 space-y-6">
    
    <!-- Profile Overview Card -->
    <div class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm">
        <div class="border-b border-slate-200 bg-slate-50 px-4 py-3 sm:px-6">
            <h2 class="text-sm font-semibold text-slate-900">Profile Overview</h2>
        </div>
        <div class="px-4 py-6 sm:px-6">
            <h3 class="text-xl font-semibold tracking-tight text-slate-900">Hi there, <span class="text-indigo-600">{{ user.first_name }}</span></h3>
            <p class="mt-2 text-sm text-slate-600">Stay updated on your IT support requests and streamline your tasks.</p>
            <a href="{% url 'viewreview' username=request.user.username %}"
               class="mt-4 inline-flex items-center justify-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-500/20">
                Go to Dashboard <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </div>

    <!-- Profile Section -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
        
        <!-- Profile Credentials Card -->
        <div class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm">
            <div class="border-b border-slate-200 bg-slate-50 px-4 py-3 sm:px-6">
                <h2 class="text-sm font-semibold text-slate-900">Profile Credentials</h2>
            </div>
            <div class="px-4 py-6 sm:px-6 space-y-4">
                <div>
                    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">User Type</p>
                    <p class="mt-1 text-sm font-medium text-slate-900">
                        {% if user.is_superuser %}
                            <span class="inline-flex items-center rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-800">
                                Admin
                            </span>
                        {% else %}
                            <span class="inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-800">
                                Employee
                            </span>
                        {% endif %}
                    </p>
                </div>

                <div class="border-t border-slate-200 pt-4">
                    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Employee ID</p>
                    <p class="mt-1 text-sm font-medium text-slate-900">{{ user.username }}</p>
                </div>

                <div class="border-t border-slate-200 pt-4">
                    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Full Name</p>
                    <p class="mt-1 text-sm font-medium text-slate-900">{{ user.get_full_name }}</p>
                </div>

                <div class="border-t border-slate-200 pt-4">
                    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Email</p>
                    <p class="mt-1 text-sm font-medium text-slate-900">{{ user.email }}</p>
                </div>
            </div>
        </div>

        <!-- FAQ Accordion Card -->
        <div class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm">
            <div class="border-b border-slate-200 bg-slate-50 px-4 py-3 sm:px-6">
                <h2 class="text-sm font-semibold text-slate-900">Frequently Asked Questions</h2>
            </div>
            <div class="px-4 py-6 sm:px-6 space-y-3">
                
                <!-- FAQ Item 1 -->
                <div class="border border-slate-200 rounded-lg">
                    <button type="button" class="faq-button w-full px-4 py-3 text-left font-medium text-slate-900 hover:bg-slate-50 flex items-center justify-between" data-faq="faq-1">
                        <span class="text-sm font-semibold">How Can I Submit and Monitor Requests?</span>
                        <svg class="h-5 w-5 text-slate-500 faq-icon transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                    </button>
                    <div id="faq-1" class="faq-content hidden border-t border-slate-200 px-4 py-3 text-sm text-slate-600 space-y-2">
                        <div>
                            <p class="font-semibold text-slate-700">Submitting an IT Request</p>
                            <p>Simply navigate to the "Submit" section, fill in the required details, and click "Request". Ticket No. will also be sent to your email.</p>
                        </div>
                        <div>
                            <p class="font-semibold text-slate-700">Monitoring Your Requests</p>
                            <p>You can monitor the status of your IT requests through the "View" dashboard. This section provides updates on the progress and current status of each request you have submitted.</p>
                        </div>
                    </div>
                </div>

                <!-- FAQ Item 2 -->
                <div class="border border-slate-200 rounded-lg">
                    <button type="button" class="faq-button w-full px-4 py-3 text-left font-medium text-slate-900 hover:bg-slate-50 flex items-center justify-between" data-faq="faq-2">
                        <span class="text-sm font-semibold">Can I Cancel My IT Request?</span>
                        <svg class="h-5 w-5 text-slate-500 faq-icon transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                    </button>
                    <div id="faq-2" class="faq-content hidden border-t border-slate-200 px-4 py-3 text-sm text-slate-600 space-y-2">
                        <div>
                            <p class="font-semibold text-slate-700">Cancellation Policy</p>
                            <p>You can cancel your IT request only if its status is <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Waiting."</code> Once the request moves to <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Pending"</code> or <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Completed"</code>, cancellation is no longer possible.</p>
                        </div>
                        <div>
                            <p class="font-semibold text-slate-700">How to Cancel a Request</p>
                            <p>To cancel a request, go to the "View" dashboard, find the request with the <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Waiting"</code> status, and select the <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Cancel"</code> option. This action will remove the request from the active list and move it to the history section.</p>
                        </div>
                    </div>
                </div>

                <!-- FAQ Item 3 -->
                <div class="border border-slate-200 rounded-lg">
                    <button type="button" class="faq-button w-full px-4 py-3 text-left font-medium text-slate-900 hover:bg-slate-50 flex items-center justify-between" data-faq="faq-3">
                        <span class="text-sm font-semibold">What Happens to Completed Requests?</span>
                        <svg class="h-5 w-5 text-slate-500 faq-icon transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                    </button>
                    <div id="faq-3" class="faq-content hidden border-t border-slate-200 px-4 py-3 text-sm text-slate-600 space-y-2">
                        <div>
                            <p class="font-semibold text-slate-700">Request Status Management</p>
                            <p>Admins are responsible for updating the status of IT requests to ensure accurate tracking and progress updates. Employees can also mark their completed requests as <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Closed"</code>.</p>
                        </div>
                        <div>
                            <p class="font-semibold text-slate-700">Closing Completed Requests</p>
                            <p>Once a request is marked as <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Completed"</code>, it can be closed by either the admin or the employee. When a request is closed, its status is updated to <code class="rounded bg-slate-100 px-1.5 py-0.5 text-xs font-semibold text-slate-700">"Closed"</code> and it is moved to the history section.</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

</div>

<script src="{% static 'js/profile.js' %}"></script>

{% endblock %}
